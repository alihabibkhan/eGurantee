<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    {% include 'head.html' %}
    <style>
        .parent-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin: 1.5rem;
        }
        .card {
            background: linear-gradient(135deg, #34d399, #6ee7b7); /* Vibrant green gradient for growth and positivity */
            border: none;
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px); /* Subtle lift effect on hover */
        }
        .card h2, .card h5 {
            color: #1e3a8a; /* Deep blue for trust and professionalism */
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .card h3 {
            color: #ffffff; /* White for contrast on vibrant background */
            font-size: 2rem;
            font-weight: 700;
        }
        .card p {
            color: #1e3a8a; /* Deep blue for readability */
            font-size: 1rem;
            font-weight: 500;
        }
        .no-data {
            color: #1e3a8a; /* Consistent deep blue for no-data message */
            font-style: italic;
            font-size: 1rem;
        }
        .btn-primary {
            background-color: #0d9488; /* Rich teal for buttons, aligning with welfare theme */
            border-color: #0d9488;
            color: #ffffff;
        }
        .btn-primary:hover {
            background-color: #0b8278; /* Slightly darker teal on hover */
            border-color: #0b8278;
        }
        .fa-3x {
            color: #1e3a8a; /* Deep blue for icons to match text */
        }
        .metrics-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .metrics-left {
            flex: 1;
            min-width: 150px;
        }
        .metrics-right {
            flex: 1;
            display: flex;
            justify-content: space-between;
            min-width: 150px;
        }
    </style>
</head>
<body>
    {% include 'navbar.html' %}

    {% import 'breadcrumbs.html' as brd %}
    {{ brd.render_Breadcrumbs([{"url":'', "label":'Dashboard'}]) }}

    <div class="mt-3">
        {% include 'message_box.html' %}
    </div>
    <div class="container my-4">
        <div class="parent-card">
            <div class="row row-cols-1 row-cols-md-4 g-4">
                <!-- Loan Disbursement -->
                <div class="col">
                    <div class="card h-100">
                        <h2>Loan Disbursement</h2>
                        {% if result.get_disbursed_loan_count %}
                            {% for row in result.get_disbursed_loan_count %}
                                <h3>{{ row.count }}</h3>
                                <p>{{ row.LoanProductCode }}</p>
                            {% endfor %}
                        {% else %}
                            <p class="no-data">No data to display</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Active Loan -->
                <div class="col">
                    <div class="card h-100">
                        <h2>Active Loan</h2>
                        {% if result.get_active_loan_count %}
                            {% for row in result.get_active_loan_count %}
                                <h3>{{ row.count }}</h3>
                                <p>{{ row.LoanProductCode }}</p>
                            {% endfor %}
                        {% else %}
                            <p class="no-data">No data to display</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Non-Active Loan -->
                <div class="col">
                    <div class="card h-100">
                        <h2>Non-Active Loan</h2>
                        {% if result.get_non_performing_loan_count %}
                            {% for row in result.get_non_performing_loan_count %}
                                <h3>{{ row.count }}</h3>
                                <p>{{ row.LoanProductCode }}</p>
                            {% endfor %}
                        {% else %}
                            <p class="no-data">No data to display</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Loan Beneficiaries -->
                <div class="col">
                    <div class="card h-100">
                        <h2>Loan Beneficiaries</h2>
                        {% if result.total_loan_beneficiary_count %}
                            {% for row in result.total_loan_beneficiary_count %}
                                <h3>{{ row.count }}</h3>
                                <p>{{ row.Gender }}</p>
                            {% endfor %}
                        {% else %}
                            <p class="no-data">No data to display</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% if result.area_metrics %}
        <div class="container my-4">
            <div class="parent-card">
                <div class="row row-cols-1 row-cols-md-4 g-4">
                    {% for row in result.area_metrics %}
                        <div class="col">
                            <div class="card h-100">
                                <h2>{{ row.area_name }}</h2>
                                <div class="metrics-container">
                                    <div class="metrics-left">
                                        <h3>{{ row.beneficiary_count }}</h3>
                                        <p>Loan Beneficiaries</p>
                                    </div>
                                    <div class="metrics-right">
                                        <div>
                                            <h3>{{ row.disbursed_count }}</h3>
                                            <p>Loan Disbursed</p>
                                        </div>
                                        <div>
                                            <h3>{{ row.active_count }}</h3>
                                            <p>Active Loan</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
    <div class="container my-4">
        <div class="parent-card">
            <div class="row row-cols-1 row-cols-md-4 g-4">
                <!-- Volunteers Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-users fa-3x mb-3"></i>
                                <h5 class="card-title">Volunteers</h5>
                                <p class="card-text">Manage and track your Volunteers' activity, permissions, and interactions within the system for better oversight and control.</p>
                                <a href="{{url_for('manage_users')}}" class="btn btn-primary">View Volunteers Data</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- Budget Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-wallet fa-3x mb-3"></i>
                                <h5 class="card-title">Budget</h5>
                                <p class="card-text">Track your organization's budget, expenditures, and financial allocations to ensure proper resource management.</p>
                                <a href="{{url_for('manage_budget')}}" class="btn btn-primary">Manage Budget</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- Branches Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-sitemap fa-3x mb-3"></i>
                                <h5 class="card-title">Branches</h5>
                                <p class="card-text">Manage and monitor the operations of various branches or locations within your organization to streamline operations.</p>
                                <a href="{{url_for('manage_branches')}}" class="btn btn-primary">View Branch Info</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- PreDisbursement Card -->
                <div class="col">
                    <div class="card h-100 text-center">
                        <div class="card-body">
                            <i class="fas fa-money-check-alt fa-3x mb-3"></i>
                            <h5 class="card-title">PreDisbursement</h5>
                            <p class="card-text">Track and manage all the necessary steps before disbursements are made, including approvals and verifications.</p>
                            <a href="{{url_for('manage_pre_disbursement')}}" class="btn btn-primary">Prepare Disbursement</a>
                        </div>
                    </div>
                </div>

                <!-- PostDisbursement Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fas fa-money-bill-wave fa-3x mb-3"></i>
                                <h5 class="card-title">PostDisbursement</h5>
                                <p class="card-text">Manage the processes and reports after disbursements, including tracking, reconciliation, and auditing steps.</p>
                                <a href="{{url_for('manage_post_disbursement')}}" class="btn btn-primary">Review Disbursement</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- File Uploading/Validation Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fa-solid fa-upload fa-3x mb-3"></i>
                                <h5 class="card-title">File Uploading/Validation</h5>
                                <p class="card-text">Manage file validation and uploading. Prevents from duplicate/discrepancies records, as well as get the summary report for duplicate/discrepancies</p>
                                <a href="{{url_for('manage_file')}}" class="btn btn-primary">Upload/Validate</a>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <!-- Manage Loan Metrics Card -->
                {% if result.is_admin %}
                    <div class="col">
                        <div class="card h-100 text-center">
                            <div class="card-body">
                                <i class="fa-solid fa-cubes fa-3x mb-3"></i>
                                <h5 class="card-title">Manage Loan Metrics</h5>
                                <p class="card-text">Manage Loan Metrics. Handles loan applications more efficiently.</p>
                                <a href="{{url_for('manage_loan_metrics')}}" class="btn btn-primary">Manage Loan Metrics</a>
                            </div>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>